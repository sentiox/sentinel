# Вещи, которые вам нужно знать перед установкой

- Это бета-версия, которая находится в активной разработке. Из версии в версию что-то может меняться.
- При возникновении проблем, нужен технически грамотный фидбэк в чат. Ознакомьтесь с закрепом в топике.
- При обновлении **обязательно** [сбрасывайте кэш LuCI](https://podkop.net/docs/clear-browser-cache/).
- Также при обновлении всегда заходите в конфигурацию и проверяйте свои настройки. Конфигурация может измениться.
- Необходимо минимум 25МБ свободного места на роутере. Роутеры с флешками на 16МБ сразу мимо.
- При старте программы редактируется конфиг Dnsmasq.
- Sentinel редактирует конфиг sing-box. Обязательно сохраните ваш конфиг sing-box перед установкой, если он вам нужен.
- Информация здесь может быть устаревшей. Все изменения фиксируются в [телеграм-чате](https://github.com/sentiox/sentinel).
- [Если у вас что-то не работает.](https://podkop.net/docs/diagnostics/)
- Если у вас установлен Getdomains, [его следует удалить](https://github.com/sentiox/domain-routing-openwrt?tab=readme-ov-file#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%B4%D0%BB%D1%8F-%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F).
- Требуется версия OpenWrt 24.10.
- Dashboard доступен, если вы заходите по http (из-за особенностей clash api). И не будет работать, если вы заходите по https и/или домену.

# Документация
https://podkop.net/

# Установка Sentinel
Полная информация в [документации](https://podkop.net/docs/install/)

Вкратце, достаточно одного скрипта для установки и обновления:
```
sh <(wget -O - https://raw.githubusercontent.com/sentiox/sentinel/refs/heads/main/install.sh)
```

## Изменения 0.7.0
Начиная с версии 0.7.0 изменена структура конфига `/etc/config/sentinel`. Старые значения несовместимы с новыми. Нужно заново настроить Sentinel.

Скрипт установки обнаружит старую версию и предупредит вас об этом. Если вы согласитесь, то он сделает автоматически написанное ниже.

При обновлении вручную нужно:

0. Не ныть в issue и чатик.
1. Забэкапить старый конфиг:
```
mv /etc/config/sentinel /etc/config/sentinel-070
```
2. Стянуть новый дефолтный конфиг:
```
wget -O /etc/config/sentinel https://raw.githubusercontent.com/sentiox/sentinel/refs/heads/main/sentinel/files/etc/config/sentinel
```
3. Настроить заново ваш Sentinel через Luci или UCI.

# ToDo

> [!IMPORTANT]  
> PR принимаются только по issues, у которых стоит label "enhancement". Либо по согласованию с авторами в ТГ-чате. Остальные PR на данный момент не рассматриваются.

## Реализовано
- [x] [Подписка](https://github.com/sentiox/sentinel/issues/118) — поддержка Remnawave и других панелей (XRAY_BASE64). Автовыбор стран через URLTest, отображение на дашборде.
- [x] Автообновление подписки — проверка по расписанию с умным сравнением (MD5), перезапуск только при изменениях.
- [x] Кнопка «Обновить подписку» на дашборде.
- [x] HWID — идентификация устройства для панелей с лимитом устройств (Remnawave и др.).

## Будущее
- [ ] Фильтрация по тегу — для каждой секции выбор ключевых слов (NL, DE, FI и т.д.) с автосозданием URLTest outbound.
- [ ] Весь трафик в sing-box и маршрутизация полностью на его уровне.
- [ ] Мониторинг sing-box — при exit 1 восстановление dnsmasq и перезапуск. [Issue](https://github.com/sentiox/sentinel/issues/111)
- [ ] Блокировка DoH серверов.
- [ ] IPv6.

## Тесты
- [ ] Unit тесты (BATS)
- [ ] Интеграционные тесты бекенда (OpenWrt rootfs + BATS)

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/sentiox/sentinel)